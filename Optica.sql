-- MySQL Script generated by MySQL Workbench
-- Thu May 13 12:15:56 2021
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema optica
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema optica
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `optica` DEFAULT CHARACTER SET utf8 ;
USE `optica` ;

-- -----------------------------------------------------
-- Table `optica`.`Supplier`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `optica`.`Supplier` (
  `NIF` VARCHAR(9) NOT NULL,
  `name` VARCHAR(45) NOT NULL,
  `phone` INT NOT NULL,
  `fax` INT NULL,
  `street` VARCHAR(45) NULL,
  `num` INT NULL,
  `floor` INT NULL,
  `door` VARCHAR(2) NULL,
  `city` VARCHAR(45) NULL,
  `code` INT NULL,
  PRIMARY KEY (`NIF`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `optica`.`Glass`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `optica`.`Glass` (
  `id_glass` INT NOT NULL,
  `stock` INT NOT NULL,
  `brand` VARCHAR(45) NOT NULL,
  `power_lens_1` FLOAT NOT NULL,
  `power_lens_2` FLOAT NOT NULL,
  `frame` VARCHAR(45) NOT NULL,
  `frame_color` VARCHAR(45) NOT NULL,
  `color_lens_1` VARCHAR(45) NOT NULL,
  `color_lens_2` VARCHAR(45) NOT NULL,
  `price` FLOAT NOT NULL,
  `Supplier_NIF` VARCHAR(9) NOT NULL,
  PRIMARY KEY (`id_glass`),
  CONSTRAINT `fk_Glass_Supplier1`
    FOREIGN KEY (`Supplier_NIF`)
    REFERENCES `optica`.`Supplier` (`NIF`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `optica`.`Costumer`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `optica`.`Costumer` (
  `email` VARCHAR(45) NOT NULL,
  `name` VARCHAR(45) NOT NULL,
  `address` VARCHAR(45) NULL,
  `costumer_phone` INT NULL,
  `sign_up` DATE NULL,
  PRIMARY KEY (`email`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `optica`.`Recommendation`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `optica`.`Recommendation` (
  `guess` VARCHAR(45) NOT NULL,
  `costumer_email` VARCHAR(45) NULL,
  PRIMARY KEY (`guess`),
  CONSTRAINT `fk_Recommendation_Costumer1`
    FOREIGN KEY (`guess`)
    REFERENCES `optica`.`Costumer` (`email`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Recommendation_Costumer2`
    FOREIGN KEY (`costumer_email`)
    REFERENCES `optica`.`Costumer` (`email`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `optica`.`Ticket`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `optica`.`Ticket` (
  `id_ticket` INT NOT NULL,
  `employee` VARCHAR(45) NOT NULL,
  `email_costumer` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`id_ticket`),
  CONSTRAINT `fk_Ticket_Costumer1`
    FOREIGN KEY (`email_costumer`)
    REFERENCES `optica`.`Costumer` (`email`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `optica`.`Glass_has_Ticket`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `optica`.`Glass_has_Ticket` (
  `glass_id` INT NOT NULL,
  `ticket_id` INT NOT NULL,
  PRIMARY KEY (`glass_id`, `ticket_id`),
  CONSTRAINT `fk_Glass_has_Ticket_Glass1`
    FOREIGN KEY (`glass_id`)
    REFERENCES `optica`.`Glass` (`id_glass`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Glass_has_Ticket_Ticket1`
    FOREIGN KEY (`ticket_id`)
    REFERENCES `optica`.`Ticket` (`id_ticket`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;

-- -----------------------------------------------------
-- Data for table `optica`.`Supplier`
-- -----------------------------------------------------
START TRANSACTION;
USE `optica`;
INSERT INTO `optica`.`Supplier` (`NIF`, `name`, `phone`, `fax`, `street`, `num`, `floor`, `door`, `city`, `code`) VALUES ('54455238P', 'BCN Glasses', 935478547, 93654759, 'C/ Valencia', 32, 2, '1', 'Barcelona', 08025);
INSERT INTO `optica`.`Supplier` (`NIF`, `name`, `phone`, `fax`, `street`, `num`, `floor`, `door`, `city`, `code`) VALUES ('45236574L', 'MAD Glasses', 91454332, NULL, 'C/ Newton', 45, 1, '1', 'Madrid', 28050);
INSERT INTO `optica`.`Supplier` (`NIF`, `name`, `phone`, `fax`, `street`, `num`, `floor`, `door`, `city`, `code`) VALUES ('B12255698', 'LPA Glases', 928655224, NULL, 'C/ Venegas', 123, 3, 'B', 'Las Palmas de Gran Canaria', 35002);

COMMIT;


-- -----------------------------------------------------
-- Data for table `optica`.`Glass`
-- -----------------------------------------------------
START TRANSACTION;
USE `optica`;
INSERT INTO `optica`.`Glass` (`id_glass`, `stock`, `brand`, `power_lens_1`, `power_lens_2`, `frame`, `frame_color`, `color_lens_1`, `color_lens_2`, `price`, `Supplier_NIF`) VALUES (4787, 20, 'Ray Ban', 2.0, 2.0, 'pasta', 'negro', 'azul', 'azul', 34.99, '54455238P');
INSERT INTO `optica`.`Glass` (`id_glass`, `stock`, `brand`, `power_lens_1`, `power_lens_2`, `frame`, `frame_color`, `color_lens_1`, `color_lens_2`, `price`, `Supplier_NIF`) VALUES (5652, 13, 'MO', 1.3, 1.4, 'flotante', 'dorado', 'amarillo', ' amarillo', 27.90, '45236574L');
INSERT INTO `optica`.`Glass` (`id_glass`, `stock`, `brand`, `power_lens_1`, `power_lens_2`, `frame`, `frame_color`, `color_lens_1`, `color_lens_2`, `price`, `Supplier_NIF`) VALUES (1684, 8, 'Oakley', 1.0, 1.0, 'metálica', 'negro', 'verde', 'verde', 80.42, 'B12255698');

COMMIT;


-- -----------------------------------------------------
-- Data for table `optica`.`Costumer`
-- -----------------------------------------------------
START TRANSACTION;
USE `optica`;
INSERT INTO `optica`.`Costumer` (`email`, `name`, `address`, `costumer_phone`, `sign_up`) VALUES ('anavera@gmail.com', 'Ana Vera', 'C/ Base de datos 54', 666222333, '2019/04/12');
INSERT INTO `optica`.`Costumer` (`email`, `name`, `address`, `costumer_phone`, `sign_up`) VALUES ('mariamontilla@gmail.com', 'María Montilla', NULL, 923455439, '2020/01/04');
INSERT INTO `optica`.`Costumer` (`email`, `name`, `address`, `costumer_phone`, `sign_up`) VALUES ('itacademy@gmail.com', 'IT Academy', 'C/ Angular 123', 933444555, '2017/11/24');

COMMIT;


-- -----------------------------------------------------
-- Data for table `optica`.`Recommendation`
-- -----------------------------------------------------
START TRANSACTION;
USE `optica`;
INSERT INTO `optica`.`Recommendation` (`guess`, `costumer_email`) VALUES ('anavera@gmail.com', 'mariamontilla@gmail.com');
INSERT INTO `optica`.`Recommendation` (`guess`, `costumer_email`) VALUES ('mariamontilla@gmail.com', NULL);
INSERT INTO `optica`.`Recommendation` (`guess`, `costumer_email`) VALUES ('itacademy@gmail.com', 'anavera@gmail.com');

COMMIT;


-- -----------------------------------------------------
-- Data for table `optica`.`Ticket`
-- -----------------------------------------------------
START TRANSACTION;
USE `optica`;
INSERT INTO `optica`.`Ticket` (`id_ticket`, `employee`, `email_costumer`) VALUES (123456, 'Fernando', 'anavera@gmail.com');
INSERT INTO `optica`.`Ticket` (`id_ticket`, `employee`, `email_costumer`) VALUES (456789, 'Natalia', 'mariamontilla@gmail.com');
INSERT INTO `optica`.`Ticket` (`id_ticket`, `employee`, `email_costumer`) VALUES (654321, 'Fernando', 'itacademy@gmail.com');

COMMIT;


-- -----------------------------------------------------
-- Data for table `optica`.`Glass_has_Ticket`
-- -----------------------------------------------------
START TRANSACTION;
USE `optica`;
INSERT INTO `optica`.`Glass_has_Ticket` (`glass_id`, `ticket_id`) VALUES (4787, 123456);
INSERT INTO `optica`.`Glass_has_Ticket` (`glass_id`, `ticket_id`) VALUES (5652, 456789);
INSERT INTO `optica`.`Glass_has_Ticket` (`glass_id`, `ticket_id`) VALUES (1684, 654321);

COMMIT;

